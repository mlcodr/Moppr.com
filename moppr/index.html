<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Moppr — Maid Finder Prototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              brand: {
                DEFAULT: '#22D3EE',
                50: '#ECFEFF',
                100: '#CFFAFE',
                200: '#A5F3FC',
                300: '#67E8F9',
                400: '#22D3EE',
                500: '#06B6D4',
                600: '#0891B2',
                700: '#0E7490',
                800: '#155E75',
                900: '#164E63'
              },
              indigo: {
                DEFAULT: '#6366F1'
              }
            },
            boxShadow: {
              soft: '0 12px 40px rgba(15, 23, 42, 0.12)'
            },
            backgroundImage: {
              'brand-gradient': 'linear-gradient(135deg, #22D3EE 0%, #6366F1 100%)'
            }
          }
        }
      }
    </script>
    <style>
      :root {
        --bg-light: #F8FAFC;
        --panel-light: #FFFFFF;
        --text-light: #0F172A;
        --bg-dark: #0B1220;
        --panel-dark: #0F172A;
        --text-dark: #E5E7EB;
        --focus-glow: rgba(34, 211, 238, 0.55);
        --focus-glow-dark: rgba(99, 102, 241, 0.55);
      }
      html, body { height: 100%; }
      body {
        background-color: var(--bg-light);
        color: var(--text-light);
        transition: background-color 0.4s ease, color 0.4s ease;
        overflow-x: hidden;
      }
      html.dark body {
        background-color: var(--bg-dark);
        color: var(--text-dark);
      }
      .gradient-text {
        background: linear-gradient(135deg, #22D3EE 0%, #6366F1 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }
      .glass-light { background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(12px); }
      .glass-dark { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); }
      .focus-primary:focus {
        outline: none;
        box-shadow: 0 0 0 3px var(--focus-glow);
        border-color: #22D3EE;
      }
      html.dark .focus-primary:focus {
        box-shadow: 0 0 0 3px var(--focus-glow-dark);
        border-color: #6366F1;
      }
      .btn-primary {
        background-image: linear-gradient(135deg, #22D3EE 0%, #6366F1 100%);
        color: #fff;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .btn-outline {
        transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease, color 0.2s ease;
      }
      .btn-hover:hover {
        transform: translateY(-1px) scale(1.02);
        box-shadow: 0 20px 40px rgba(36, 198, 223, 0.25);
      }
      .btn-outline:hover {
        background-color: rgba(15, 23, 42, 0.04);
      }
      html.dark .btn-outline:hover {
        background-color: rgba(148, 163, 184, 0.12);
      }
      @keyframes pulseDots {
        0%, 80%, 100% { opacity: 0; }
        40% { opacity: 1; }
      }
      .typing::after {
        content: '···';
        display: inline-block;
        margin-left: 0.25rem;
        animation: pulseDots 1.2s infinite;
      }
      .how-step {
        opacity: 0;
        transform: translateY(24px);
        transition: opacity 0.8s ease, transform 0.8s ease;
      }
      .how-step.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .maid-card {
        opacity: 0;
        transform: translateY(28px);
        transition: opacity 0.65s ease, transform 0.65s ease, box-shadow 0.3s ease;
      }
      .maid-card.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .maid-card:hover {
        box-shadow: 0 24px 60px rgba(34, 211, 238, 0.22);
      }
      body.custom-cursor-active {
        cursor: none;
      }
      #cube-bg {
        position: fixed;
        top: 0; left: 0; width: 100vw; height: 100vh;
        z-index: 0;
        pointer-events: none;
      }
      body.custom-cursor-active a,
      body.custom-cursor-active button,
      body.custom-cursor-active [role="button"],
      body.custom-cursor-active .btn-primary,
      body.custom-cursor-active .btn-outline,
      body.custom-cursor-active .maid-card,
      body.custom-cursor-active [data-booking-button] {
        cursor: none !important;
      }
      body.custom-cursor-active input,
      body.custom-cursor-active textarea {
        cursor: text !important;
      }
      .custom-cursor {
        position: fixed;
        top: 0;
        left: 0;
        width: 40px;
        height: 40px;
        pointer-events: none;
        transform: translate(-50%, -50%);
        z-index: 9999;
        opacity: 0;
        transition: opacity 0.2s ease;
        mix-blend-mode: difference;
      }
      .custom-cursor.is-visible {
        opacity: 1;
      }
      .custom-cursor.is-active .cursor-ring {
        border-color: rgba(99, 102, 241, 0.9);
      }
      .custom-cursor.is-clicked .cursor-ring {
        border-color: rgba(34, 211, 238, 0.9);
      }
      .cursor-ring {
        position: absolute;
        left: 50%;
        top: 50%;
        width: 36px;
        height: 36px;
        border: 2px solid rgba(255, 255, 255, 0.85);
        border-radius: 9999px;
        transform: translate(-50%, -50%);
        backdrop-filter: blur(8px);
        box-shadow: 0 0 20px rgba(14, 165, 233, 0.15);
      }
      html.dark .cursor-ring {
        border-color: rgba(255, 255, 255, 0.9);
        box-shadow: 0 0 24px rgba(34, 211, 238, 0.35);
      }
      .cursor-dot {
        position: absolute;
        left: 50%;
        top: 50%;
        width: 6px;
        height: 6px;
        border-radius: 9999px;
        background: rgba(255, 255, 255, 0.95);
        transform: translate(-50%, -50%);
        box-shadow: 0 0 12px rgba(34, 211, 238, 0.35);
      }
      html.dark .cursor-dot {
        background: rgba(255, 255, 255, 0.95);
        box-shadow: 0 0 16px rgba(99, 102, 241, 0.45);
      }
    </style>
  </head>
    <body class="min-h-full antialiased">
    <canvas id="cube-bg"></canvas>
    <div class="custom-cursor">
      <span class="cursor-ring"></span>
      <span class="cursor-dot"></span>
    </div>
    <div id="app" class="min-h-full flex flex-col"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-aN1zFeB8HKtgr7EhQO+UGK8SNCLkP+Psc91CCh9jZT0rOYxS0HkKaVu31JaGum0gnkk2ixaCD1oCgAHcRAQZlw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const maids = [
          {
            id: '1',
            name: 'Maria Rodriguez',
            location: 'Westside',
            avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80',
            tagline: 'Detail-oriented cleaner specializing in deep cleaning and organization.',
            hourlyRate: 30,
            dailyRate: 240,
            skills: ['Deep Cleaning', 'Organization', 'Pet Care'],
            ratingAvg: 4.9,
            ratingCount: 112
          },
          {
            id: '2',
            name: 'Sarah Johnson',
            location: 'Downtown',
            avatar: 'https://images.unsplash.com/photo-1531891437562-4301cf35b7e4?auto=format&fit=crop&w=400&q=80',
            tagline: 'Professional housekeeper with 5+ years experience. I love making homes sparkle!',
            hourlyRate: 25,
            dailyRate: 200,
            skills: ['Cleaning', 'Cooking', 'Laundry'],
            ratingAvg: 4.8,
            ratingCount: 127
          },
          {
            id: '3',
            name: 'Anna Williams',
            location: 'Southside',
            avatar: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=400&q=80',
            tagline: 'Professional cleaner with expertise in window cleaning and deep cleaning services.',
            hourlyRate: 26,
            dailyRate: 210,
            skills: ['Window Cleaning', 'Deep Cleaning', 'Laundry'],
            ratingAvg: 4.8,
            ratingCount: 94
          },
          {
            id: '4',
            name: 'Emily Chen',
            location: 'Eastside',
            avatar: 'https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=400&q=80',
            tagline: 'Experienced nanny and housekeeper. Great with kids and pets!',
            hourlyRate: 22,
            dailyRate: 180,
            skills: ['Babysitting', 'Cooking', 'Light Cleaning'],
            ratingAvg: 4.7,
            ratingCount: 156
          },
          {
            id: '5',
            name: 'Lisa Thompson',
            location: 'Northside',
            avatar: 'https://images.unsplash.com/photo-1517365830460-955ce3ccd263?auto=format&fit=crop&w=400&q=80',
            tagline: 'Compassionate caregiver specializing in elderly care and meal preparation.',
            hourlyRate: 28,
            dailyRate: 220,
            skills: ['Elderly Care', 'Meal Prep', 'Housekeeping'],
            ratingAvg: 4.6,
            ratingCount: 73
          },
          {
            id: '6',
            name: 'Jennifer Davis',
            location: 'Central',
            avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80',
            tagline: 'Chef-turned-housekeeper offering cooking services and light housekeeping.',
            hourlyRate: 24,
            dailyRate: 190,
            skills: ['Cooking', 'Grocery Shopping', 'Light Cleaning'],
            ratingAvg: 4.5,
            ratingCount: 112
          },
          {
            id: '7',
            name: 'Chloe Martin',
            location: 'Harborfront',
            avatar: 'https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=400&q=80',
            tagline: 'Meticulous cleaner with a passion for sustainable products.',
            hourlyRate: 27,
            dailyRate: 215,
            skills: ['Eco Cleaning', 'Organization', 'Laundry'],
            ratingAvg: 4.9,
            ratingCount: 141
          },
          {
            id: '8',
            name: 'Jasmine Patel',
            location: 'Midtown',
            avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80',
            tagline: 'Trusted family assistant for meal prep, school runs, and tidy homes.',
            hourlyRate: 29,
            dailyRate: 230,
            skills: ['Meal Prep', 'Errands', 'Laundry'],
            ratingAvg: 4.8,
            ratingCount: 118
          },
          {
            id: '9',
            name: 'Olivia Brooks',
            location: 'Lakeside',
            avatar: 'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=400&q=80',
            tagline: 'Resort-level cleaning specialist with a focus on detail and polish.',
            hourlyRate: 32,
            dailyRate: 250,
            skills: ['Deep Cleaning', 'Polishing', 'Laundry'],
            ratingAvg: 4.9,
            ratingCount: 164
          },
          {
            id: '10',
            name: 'Hannah Lee',
            location: 'Crosstown',
            avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80',
            tagline: 'Bilingual housekeeper ready for last-minute bookings and special events.',
            hourlyRate: 31,
            dailyRate: 245,
            skills: ['Event Support', 'Laundry', 'Organization'],
            ratingAvg: 4.7,
            ratingCount: 102
          },
          {
            id: '11',
            name: 'Sophia Turner',
            location: 'Hillcrest',
            avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80',
            tagline: 'Busy families love my weekly deep-clean packages and fridge reset.',
            hourlyRate: 33,
            dailyRate: 255,
            skills: ['Deep Cleaning', 'Fridge Reset', 'Laundry'],
            ratingAvg: 4.9,
            ratingCount: 138
          },
          {
            id: '12',
            name: 'Isabella Wright',
            location: 'Riverside',
            avatar: 'https://images.unsplash.com/photo-1531891437562-4301cf35b7e4?auto=format&fit=crop&w=400&q=80',
            tagline: 'Luxury home specialist with five-star hotel experience.',
            hourlyRate: 38,
            dailyRate: 300,
            skills: ['Luxury Cleaning', 'Polishing', 'Laundry'],
            ratingAvg: 4.95,
            ratingCount: 176
          },
          {
            id: '13',
            name: 'Grace Kim',
            location: 'Skyline',
            avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80',
            tagline: 'Flexible schedules for apartments and micro-lofts.',
            hourlyRate: 23,
            dailyRate: 175,
            skills: ['Light Cleaning', 'Laundry', 'Organization'],
            ratingAvg: 4.6,
            ratingCount: 86
          },
          {
            id: '14',
            name: 'Natalie Perez',
            location: 'Bayview',
            avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80',
            tagline: 'Weeknight dinner prep and spotless kitchens are my specialty.',
            hourlyRate: 27,
            dailyRate: 210,
            skills: ['Cooking', 'Dishwashing', 'Counter Care'],
            ratingAvg: 4.8,
            ratingCount: 121
          },
          {
            id: '15',
            name: 'Victoria Ramirez',
            location: 'Old Town',
            avatar: 'https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=400&q=80',
            tagline: 'Move-in/move-out cleaning wizard with guaranteed checklist completion.',
            hourlyRate: 35,
            dailyRate: 270,
            skills: ['Move-Out Cleaning', 'Carpet Care', 'Dusting'],
            ratingAvg: 4.9,
            ratingCount: 189
          },
          {
            id: '16',
            name: 'Zoe Carter',
            location: 'Warehouse District',
            avatar: 'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=400&q=80',
            tagline: 'Creative organizer turning cluttered spaces into calm corners.',
            hourlyRate: 29,
            dailyRate: 225,
            skills: ['Organization', 'Donation Sorting', 'Laundry'],
            ratingAvg: 4.8,
            ratingCount: 133
          },
          {
            id: '17',
            name: 'Mia Hughes',
            location: 'Arts District',
            avatar: 'https://images.unsplash.com/photo-1531891437562-4301cf35b7e4?auto=format&fit=crop&w=400&q=80',
            tagline: 'Studio specialist who keeps creative spaces spotless.',
            hourlyRate: 24,
            dailyRate: 190,
            skills: ['Studio Cleaning', 'Laundry', 'Organization'],
            ratingAvg: 4.7,
            ratingCount: 99
          },
          {
            id: '18',
            name: 'Lily Anderson',
            location: 'Garden Grove',
            avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80',
            tagline: 'Eco-friendly cleaning routines with aromatherapy touches.',
            hourlyRate: 28,
            dailyRate: 215,
            skills: ['Eco Cleaning', 'Aromatherapy', 'Laundry'],
            ratingAvg: 4.85,
            ratingCount: 142
          },
          {
            id: '19',
            name: 'Ava Scott',
            location: 'Uptown',
            avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80',
            tagline: 'Discreet, dependable, and detail obsessed for luxury high-rise homes.',
            hourlyRate: 37,
            dailyRate: 295,
            skills: ['Luxury Cleaning', 'Laundry', 'Organization'],
            ratingAvg: 4.95,
            ratingCount: 204
          },
          {
            id: '20',
            name: 'Nora Bennett',
            location: 'Greenbelt',
            avatar: 'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=400&q=80',
            tagline: 'Weekend warrior ready for yard-to-living-room refreshes.',
            hourlyRate: 26,
            dailyRate: 205,
            skills: ['Garden Tidying', 'Laundry', 'Deep Cleaning'],
            ratingAvg: 4.7,
            ratingCount: 131
          }
        ]

        const reviews = [
          { id: 'r1', maidId: '1', user: 'Noah • Austin, TX', rating: 5, text: 'Super thorough and on time!', createdAt: '2024-10-01' },
          { id: 'r2', maidId: '1', user: 'Ava • Seattle, WA', rating: 5, text: 'Great cooking and very polite.', createdAt: '2024-09-15' },
          { id: 'r3', maidId: '2', user: 'Olivia • Miami, FL', rating: 4, text: 'Nice work, could be faster.', createdAt: '2024-08-20' }
        ]

        const testimonials = [
          { rating: 5, quote: '“Booking help on Moppr is effortless and reliable.”', user: 'Jordan M. — Denver, CO' },
          { rating: 5, quote: '“Every professional we hired has been respectful and thorough.”', user: 'Samantha R. — Dallas, TX' },
          { rating: 5, quote: '“Love the in-app chat and schedule confirmations!”', user: 'Kevin L. — Portland, OR' },
          { rating: 5, quote: '“Moppr saved our weekends. Highly recommended to friends!”', user: 'Priya S. — San Jose, CA' }
        ]

        const threads = [
          {
            threadId: 't1',
            maidId: '1',
            userId: 'demo',
            lastMessageAt: '2024-10-05T14:32:00Z',
            messages: [
              { id: 'm1', sender: 'maid', text: 'Hi! Thanks for reaching out.', createdAt: '2024-10-03T09:00:00Z' },
              { id: 'm2', sender: 'user', text: 'Are you available this Saturday?', createdAt: '2024-10-03T09:01:00Z' },
              { id: 'm3', sender: 'maid', text: 'Yes, 10am works great.', createdAt: '2024-10-03T09:05:00Z' }
            ]
          },
          {
            threadId: 't2',
            maidId: '2',
            userId: 'demo',
            lastMessageAt: '2024-09-28T18:15:00Z',
            messages: [
              { id: 'm4', sender: 'maid', text: 'Reminder: booking tomorrow at 6pm.', createdAt: '2024-09-27T18:15:00Z' }
            ]
          }
        ]

        const state = {
          theme: localStorage.getItem('moppr-theme') || 'light',
          activeThreadId: threads[0] ? threads[0].threadId : null,
          messageDraft: ''
        }

        function applyTheme() {
          if (state.theme === 'dark') {
            document.documentElement.classList.add('dark')
          } else {
            document.documentElement.classList.remove('dark')
          }
          localStorage.setItem('moppr-theme', state.theme)
        }

        applyTheme()

        function toggleTheme() {
          state.theme = state.theme === 'dark' ? 'light' : 'dark'
          applyTheme()
          render()
        }

        function parseRoute() {
          const rawHash = window.location.hash || '#home'
          const cleaned = rawHash.replace('#', '')
          const [path, param] = cleaned.split('/')
          return { raw: rawHash, path: path || 'home', param: param || null }
        }

        function renderNavLink(label, hash, isActive) {
          const activeClass = isActive ? 'text-brand-500 font-medium' : 'text-slate-600 dark:text-slate-300'
          return `<a href="${hash}" class="${activeClass} transition hover:text-brand-400">${label}</a>`
        }

        function renderLogo() {
          const textColor = state.theme === 'dark' ? 'rgba(226, 232, 240, 0.95)' : 'rgba(15, 23, 42, 0.92)'
          return `
            <a href="#home" class="flex items-center gap-2">
              <span class="h-9 w-9 rounded-full shadow-soft grid place-items-center" style="background: linear-gradient(135deg, #22D3EE 0%, #6366F1 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-4 w-4 text-white" fill="currentColor">
                  <path d="M5.5 3.5c-.3.3-.5.7-.5 1.1 0 .4.2.8.5 1.1l6.8 6.8-2.1 2.1-2.5-2.5a1 1 0 0 0-1.4 1.4l2.5 2.5-3.9 3.9a1 1 0 1 0 1.4 1.4l11.5-11.5a1.6 1.6 0 0 0 0-2.2L15.7 3a1.6 1.6 0 0 0-2.2 0L9.6 6.9 6.8 4.1a1.6 1.6 0 0 0-2.3-.6z" />
                </svg>
              </span>
              <span class="font-semibold text-lg" style="color:${textColor}">Moppr</span>
            </a>
          `
        }

        function renderHeader(route) {
          return `
            <header class="sticky top-0 z-20 border-b border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-900/85 backdrop-blur">
              <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
                ${renderLogo()}
                <nav class="hidden md:flex items-center gap-6 text-sm">
                  ${renderNavLink('Home', '#home', route.path === 'home' || route.path === '')}
                  ${renderNavLink('Browse', '#browse', route.path === 'browse')}
                  ${renderNavLink('Messages', '#messages', route.path === 'messages')}
                </nav>
                <div class="flex items-center gap-3">
                  <button data-theme-toggle class="inline-flex items-center gap-2 rounded-md border border-slate-200 dark:border-slate-800 px-3 py-1.5 text-sm hover:bg-slate-50 dark:hover:bg-slate-800">
                    ${state.theme === 'dark' ? sunIcon() : moonIcon()}
                    <span class="hidden sm:inline">${state.theme === 'dark' ? 'Light' : 'Dark'}</span>
                  </button>
                  <a href="#browse" class="rounded-md btn-primary btn-hover px-3 py-1.5 text-sm shadow-soft">Find a Maid</a>
                </div>
              </div>
            </header>
          `
        }

        function renderHome() {
          return `
            <section class="relative overflow-hidden">
              <div class="absolute inset-0 -z-10 opacity-30 dark:opacity-40" aria-hidden="true">
                <div class="absolute -top-24 -left-24 h-72 w-72 rounded-full blur-3xl" style="background: radial-gradient(closest-side, #22D3EE, transparent);"></div>
                <div class="absolute -bottom-24 -right-24 h-80 w-80 rounded-full blur-3xl" style="background: radial-gradient(closest-side, #6366F1, transparent);"></div>
              </div>
              <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16 sm:py-24">
                <div class="grid lg:grid-cols-2 gap-10 items-center">
                  <div>
                    <h1 class="text-4xl sm:text-6xl font-extrabold leading-tight">
                      Hire trusted maids with a
                      <span class="block gradient-text">modern, simple experience</span>
                    </h1>
                    <p class="mt-6 text-slate-600 dark:text-slate-300 max-w-xl">
                      Moppr helps you discover reliable professionals for cleaning, cooking, babysitting, and more.
                    </p>
                    <div class="mt-8 flex flex-wrap gap-3">
                      <a href="#browse" class="rounded-md btn-primary btn-hover px-5 py-3 text-sm shadow-soft">Search Maids</a>
                      <a href="#how" class="rounded-md border border-slate-200 dark:border-slate-800 px-5 py-3 text-sm btn-outline">How it works</a>
                    </div>
                  </div>
                  <div class="rounded-2xl p-6 shadow-soft bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800">
                    <div class="text-sm text-slate-500 mb-2">Quick search</div>
                    <div class="grid sm:grid-cols-2 gap-3">
                      <input placeholder="Enter zip code or city" class="rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 focus-primary" />
                      <input placeholder="e.g., deep cleaning, cooking, laundry, babysitting" class="rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 focus-primary" />
                      <input placeholder="Min rating" class="rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 focus-primary" />
                      <input placeholder="Price range" class="rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 focus-primary" />
                      <input type="datetime-local" class="rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 focus-primary sm:col-span-2" />
                    </div>
                    <a href="#browse" class="mt-4 inline-block rounded-md btn-primary btn-hover px-4 py-2 text-sm shadow-soft">See results</a>
                  </div>
                </div>
              </div>
            </section>
            <section id="how" class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12">
              <h2 class="text-xl font-semibold">How it works</h2>
              <div class="mt-4 grid sm:grid-cols-3 gap-4">
                <div class="rounded-xl border border-slate-200 dark:border-slate-800 p-5 how-step" data-step="1">
                  <h3 class="font-medium">Search & filter</h3>
                  <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Find maids by skill, rating, availability, and price.</p>
                </div>
                <div class="rounded-xl border border-slate-200 dark:border-slate-800 p-5 how-step" data-step="2">
                  <h3 class="font-medium">Compare profiles</h3>
                  <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Review experience, certifications, and verified reviews.</p>
                </div>
                <div class="rounded-xl border border-slate-200 dark:border-slate-800 p-5 how-step" data-step="3">
                  <h3 class="font-medium">Book & chat</h3>
                  <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Confirm dates, chat instantly, and manage bookings in-app.</p>
                </div>
              </div>
            </section>
            <section class="bg-slate-50 dark:bg-slate-950/40 py-12">
              <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
                <h2 class="text-xl font-semibold">What customers say</h2>
                <div class="mt-6 grid gap-4 md:grid-cols-2 xl:grid-cols-4">
                  ${testimonials.map(t => `
                    <article class="rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/80 p-5 shadow-soft">
                      <div class="text-amber-400 text-lg mb-2">${'★'.repeat(t.rating)}</div>
                      <p class="text-sm text-slate-600 dark:text-slate-200">${t.quote}</p>
                      <div class="mt-4 text-xs uppercase tracking-wide text-slate-500">${t.user}</div>
                    </article>
                  `).join('')}
                </div>
              </div>
            </section>
            <section class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12">
              <div class="rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-soft">
                <h2 class="text-xl font-semibold">Trusted &amp; Vetted Professionals</h2>
                <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">We ensure every specialist on Moppr meets the highest standards of safety and professionalism.</p>
                <div class="mt-6 grid gap-4 sm:grid-cols-2">
                  ${renderTrustPoint('Comprehensive Background Checks', 'We review identity, employment history, and references for every pro.')}
                  ${renderTrustPoint('Moppr Insurance Guarantee', 'Coverage for incidents gives you peace of mind every visit.')}
                  ${renderTrustPoint('Secure In-App Payments', 'Encrypted transactions keep your details private with instant receipts.')}
                  ${renderTrustPoint('Verified Customer Reviews', 'Only verified customers can leave feedback you can trust.')}
                </div>
              </div>
            </section>
          `
        }

        function renderTrustPoint(title, description) {
          return `
            <div class="flex items-start gap-3">
              <span class="mt-1 inline-flex h-9 w-9 shrink-0 items-center justify-center rounded-full" style="background: linear-gradient(135deg, #22D3EE 0%, #6366F1 100%);">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                </svg>
              </span>
              <div>
                <h3 class="font-medium">${title}</h3>
                <p class="text-sm text-slate-600 dark:text-slate-300">${description}</p>
              </div>
            </div>
          `
        }

        function renderMaidCard(maid, index) {
          const skills = maid.skills.slice(0, 4).map(skill => `<span class="text-xs px-2 py-1 rounded-full border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950">${skill}</span>`).join(' ')
          return `
            <div class="maid-card group relative rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-900/80 p-6 shadow-soft" style="transition-delay:${index * 0.04}s">
              <div class="absolute -top-10 -right-12 h-32 w-32 rounded-full bg-brand-gradient opacity-10 blur-2xl"></div>
              <div class="flex flex-col gap-4 sm:flex-row">
                <div class="relative">
                  <div class="absolute inset-0 rounded-full bg-brand-gradient opacity-20 blur-lg"></div>
                  <img src="${maid.avatar}" alt="${maid.name}" class="relative h-16 w-16 rounded-full border-2 border-white dark:border-slate-700 object-cover shadow-lg" />
                </div>
                <div class="flex-1">
                  <div class="flex flex-wrap items-center gap-x-3 gap-y-1">
                    <h3 class="text-lg font-semibold text-slate-900 dark:text-white">${maid.name}</h3>
                    <span class="inline-flex items-center gap-1 rounded-full border border-emerald-200/60 bg-emerald-50 dark:bg-emerald-500/10 px-2 py-0.5 text-xs text-emerald-600 dark:text-emerald-300">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg>
                      Verified
                    </span>
                  </div>
                  <div class="flex flex-wrap items-center gap-2 text-sm text-slate-500 dark:text-slate-300 mt-1">
                    <span class="inline-flex items-center gap-1">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21c4.97-4.97 8-8.03 8-11.25A6.75 6.75 0 006 9.75C6 12.97 9.03 16.03 12 21z" /></svg>
                      ${maid.location}
                    </span>
                    <span>•</span>
                    <span>${renderStars(maid.ratingAvg)} <span class="text-xs text-slate-400">${maid.ratingAvg.toFixed(1)} (${maid.ratingCount} reviews)</span></span>
                  </div>
                  <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">${maid.tagline}</p>
                  <div class="mt-3 flex flex-wrap gap-2">${skills}</div>
                  <div class="mt-4 flex flex-wrap items-center justify-between gap-3 border-t border-slate-100 dark:border-slate-800 pt-4">
                    <div>
                      <div class="text-emerald-500 text-xl font-semibold">$${maid.hourlyRate}<span class="text-sm font-normal text-slate-500">/hour</span></div>
                      <div class="text-sm text-slate-400">$${maid.dailyRate}/day</div>
                    </div>
                    <div class="flex gap-2">
                      <a href="#profile/${maid.id}" class="rounded-md border border-slate-200 dark:border-slate-800 px-3 py-2 text-sm btn-outline">Reviews</a>
                      <a href="#profile/${maid.id}" class="rounded-md btn-primary btn-hover px-4 py-2 text-sm shadow-soft">Book Now</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `
        }

        function renderBrowse() {
          const cards = maids.map((maid, index) => renderMaidCard(maid, index)).join('')
          return `
            <section class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10">
              <div class="flex items-end justify-between gap-4">
                <div>
                  <h2 class="text-2xl font-semibold">Browse Maids</h2>
                  <p class="text-slate-600 dark:text-slate-300 text-sm">Use filters to narrow down your search.</p>
                </div>
                <div class="hidden md:flex gap-2">
                  <input placeholder="Skills" class="rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus-primary" />
                  <input placeholder="Min rating" class="rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus-primary" />
                  <input placeholder="Price range" class="rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus-primary" />
                </div>
              </div>
              <div class="mt-8 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-7">${cards}</div>
            </section>
          `
        }

        function renderStars(value) {
          const full = Math.floor(value)
          const half = value - full >= 0.5
          const empty = 5 - full - (half ? 1 : 0)
          return `<span class="inline-flex items-center text-amber-400 text-sm">${'★'.repeat(full)}${half ? '☆' : ''}<span class="text-slate-300 dark:text-slate-600">${'★'.repeat(Math.max(empty, 0))}</span></span>`
        }

        function renderProfile(id) {
          const maid = maids.find(m => m.id === id) || maids[0]
          const maidReviews = reviews.filter(r => r.maidId === maid.id)
          const reviewMarkup = maidReviews.length === 0
            ? '<div class="text-sm text-slate-500">No reviews yet.</div>'
            : maidReviews.map(r => `
              <div class="rounded-xl border border-slate-200 dark:border-slate-800 p-4">
                <div class="flex items-center gap-3">
                  <div class="h-8 w-8 rounded-full bg-slate-200 dark:bg-slate-800"></div>
                  <div class="text-sm font-medium">${r.user}</div>
                  <span class="ml-auto">${renderStars(r.rating)}</span>
                </div>
                <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">${r.text}</p>
              </div>
            `).join('')

          const skills = maid.skills.map(skill => `<span class="text-xs px-2 py-1 rounded-full border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950">${skill}</span>`).join(' ')

          return `
            <section class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 py-10">
              <div class="grid lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2">
                  <div class="grid grid-cols-3 gap-3">
                    <div class="col-span-2 h-64 rounded-xl bg-slate-100 dark:bg-slate-800 overflow-hidden">
                      <img src="${maid.avatar}" alt="${maid.name}" class="w-full h-full object-cover" />
                    </div>
                    <div class="h-64 rounded-xl bg-slate-100 dark:bg-slate-800"></div>
                  </div>
                  <h1 class="mt-6 text-3xl font-semibold">${maid.name}</h1>
                  <div class="mt-2 flex flex-wrap items-center gap-3 text-sm text-slate-600 dark:text-slate-300">
                    <span>${maid.location}</span>
                    <span>•</span>
                    <span>$${maid.hourlyRate}/hr</span>
                    <span>•</span>
                    ${renderStars(maid.ratingAvg)}
                    <span>(${maid.ratingCount})</span>
                  </div>
                  <div class="mt-3 text-sm text-slate-600 dark:text-slate-300">${maid.tagline}</div>
                  <div class="mt-4 flex flex-wrap gap-2">${skills}</div>
                  <div class="mt-8">
                    <h2 class="text-lg font-semibold">About</h2>
                    <p class="mt-2 text-slate-600 dark:text-slate-300">Experienced and reliable. This is demo content for the prototype profile page.</p>
                  </div>
                  <div class="mt-8">
                    <h2 class="text-lg font-semibold">Reviews</h2>
                    <div class="mt-3 space-y-4">${reviewMarkup}</div>
                  </div>
                </div>
                <aside class="rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5 shadow-soft h-fit">
                  <div class="text-sm text-slate-500">From</div>
                  <div class="text-2xl font-semibold">$${maid.hourlyRate}<span class="text-sm font-normal">/hr</span></div>
                  <div class="text-sm text-slate-400">$${maid.dailyRate}/day</div>
                  <div class="mt-4">
                    <button data-booking-button data-maid-id="${maid.id}" class="w-full rounded-md btn-primary btn-hover px-4 py-2 text-sm shadow-soft">Request Service</button>
                  </div>
                  <button class="mt-2 w-full rounded-md border border-slate-200 dark:border-slate-800 px-4 py-2 text-sm btn-outline">Save</button>
                  <a href="#messages" class="mt-2 inline-block w-full text-center rounded-md border border-slate-200 dark:border-slate-800 px-4 py-2 text-sm btn-outline">Message</a>
                </aside>
              </div>
            </section>
          `
        }

        function renderMessages() {
          const activeThread = threads.find(t => t.threadId === state.activeThreadId) || threads[0] || null
          const threadButtons = threads.map(thread => {
            const maid = maids.find(m => m.id === thread.maidId)
            const isActive = activeThread && activeThread.threadId === thread.threadId
            const classes = isActive
              ? 'border-brand-400 bg-brand-50 dark:bg-slate-800/60 dark:border-brand-500'
              : 'border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/60'
            return `
              <button data-thread-id="${thread.threadId}" class="w-full text-left rounded-xl border px-3 py-3 transition ${classes}">
                <div class="flex items-center gap-3">
                  <div class="h-10 w-10 rounded-full bg-slate-200 dark:bg-slate-800"></div>
                  <div>
                    <div class="text-sm font-medium">${maid ? maid.name : 'Maid'}</div>
                    <div class="text-xs text-slate-500">Last message • ${new Date(thread.lastMessageAt).toLocaleDateString()}</div>
                  </div>
                </div>
              </button>
            `
          }).join('')

          const messagesMarkup = activeThread
            ? activeThread.messages.map(message => {
                const bubbleClasses = message.sender === 'user'
                  ? 'ml-auto btn-primary text-white'
                  : 'bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200'
                return `<div class="max-w-[75%] rounded-2xl px-4 py-2 text-sm ${bubbleClasses}">${message.text}</div>`
              }).join('')
            : ''

          return `
            <section class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10">
              <div class="grid grid-cols-12 gap-6">
                <aside class="col-span-12 lg:col-span-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 h-[60vh] flex flex-col">
                  <div class="text-sm text-slate-500 mb-3">Conversations</div>
                  <div class="flex-1 space-y-2 overflow-y-auto pr-1">${threadButtons}</div>
                </aside>
                <section class="col-span-12 lg:col-span-8 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 h-[60vh] flex flex-col">
                  ${activeThread ? `
                    <div class="flex items-center gap-3 border-b border-slate-200 dark:border-slate-800 pb-3">
                      <div class="h-10 w-10 rounded-full bg-slate-200 dark:bg-slate-800"></div>
                      <div>
                        <div class="text-sm font-medium">${maids.find(m => m.id === activeThread.maidId)?.name || 'Maid'}</div>
                        <div class="text-xs text-green-500">Online now</div>
                      </div>
                    </div>
                    <div class="flex-1 overflow-y-auto py-4 space-y-3">${messagesMarkup}<div class="text-xs text-slate-400 typing">Typing</div></div>
                    <form data-message-form class="mt-auto pt-3 border-t border-slate-200 dark:border-slate-800 flex gap-2">
                      <input name="message" value="${state.messageDraft.replace(/"/g, '&quot;')}" placeholder="Type a message" class="flex-1 rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus-primary" />
                      <button type="submit" class="rounded-md btn-primary btn-hover px-4 py-2 text-sm">Send</button>
                    </form>
                  ` : `<div class="flex-1 grid place-items-center text-sm text-slate-500">Select a thread to view messages.</div>`}
                </section>
              </div>
            </section>
          `
        }

        function renderFooter() {
          return `
            <footer class="mt-12 border-t border-slate-200 dark:border-slate-800 py-8 text-center text-sm text-slate-500">
              <div class="flex flex-wrap justify-center gap-6 mb-4 text-slate-500">
                <a href="#about" class="hover:text-brand-500">About Us</a>
                <a href="#faq" class="hover:text-brand-500">FAQ</a>
                <a href="#professionals" class="hover:text-brand-500">For Professionals</a>
              </div>
              © ${new Date().getFullYear()} Moppr — Find trusted help at home.
            </footer>
          `
        }

        const cursorTargetSelectors = [
          'a[href]',
          'button',
          '.btn-primary',
          '.btn-outline',
          '[data-booking-button]',
          '.maid-card',
          '.cta-target',
          '.cursor-target'
        ]

        function initCustomCursor({ hideDefaultCursor = true } = {}) {
          if (!window.gsap) return
          const cursor = document.querySelector('.custom-cursor')
          if (!cursor) return

          const ring = cursor.querySelector('.cursor-ring')
          const dot = cursor.querySelector('.cursor-dot')
          const ringDefault = { width: 36, height: 36, borderRadius: 9999 }

          const bodyEl = document.body
          if (hideDefaultCursor) {
            bodyEl.classList.add('custom-cursor-active')
          }

          gsap.set(cursor, {
            xPercent: -50,
            yPercent: -50,
            x: window.innerWidth / 2,
            y: window.innerHeight / 2
          })
          gsap.set(ring, {
            width: ringDefault.width,
            height: ringDefault.height,
            borderRadius: ringDefault.borderRadius
          })

          let isStuck = false
          let activeTarget = null

          const moveCursor = (x, y, opts = {}) => {
            gsap.to(cursor, {
              x,
              y,
              duration: opts.duration ?? (isStuck ? 0.25 : 0.18),
              ease: 'power3.out'
            })
          }

          const showCursor = () => cursor.classList.add('is-visible')
          const hideCursor = () => cursor.classList.remove('is-visible')

          window.addEventListener('mousemove', event => {
            showCursor()
            if (!isStuck) {
              moveCursor(event.clientX, event.clientY)
            }
          })

          window.addEventListener('mouseleave', hideCursor)

          window.addEventListener('mousedown', () => {
            cursor.classList.add('is-clicked')
            gsap.to(dot, { scale: 0.7, duration: 0.2, ease: 'power3.out' })
            gsap.to(ring, { scale: 0.92, duration: 0.2, ease: 'power3.out' })
          })

          window.addEventListener('mouseup', () => {
            cursor.classList.remove('is-clicked')
            gsap.to(dot, { scale: 1, duration: 0.2, ease: 'power3.out' })
            gsap.to(ring, { scale: 1, duration: 0.2, ease: 'power3.out' })
          })

          window.addEventListener('scroll', () => {
            if (!isStuck || !activeTarget) return
            const rect = activeTarget.getBoundingClientRect()
            moveCursor(rect.left + rect.width / 2, rect.top + rect.height / 2, { duration: 0.25 })
          }, { passive: true })

          const detachTarget = () => {
            if (!isStuck) return
            isStuck = false
            activeTarget = null
            cursor.classList.remove('is-stuck', 'is-active')
            gsap.to(ring, {
              width: ringDefault.width,
              height: ringDefault.height,
              borderRadius: ringDefault.borderRadius,
              duration: 0.28,
              ease: 'power3.out'
            })
            gsap.to(dot, { scale: 1, duration: 0.28, ease: 'power3.out' })
          }

          const attachToTarget = target => {
            if (!target) return
            activeTarget = target
            const rect = target.getBoundingClientRect()
            isStuck = true
            cursor.classList.add('is-stuck', 'is-active')
            moveCursor(rect.left + rect.width / 2, rect.top + rect.height / 2, { duration: 0.24 })
            const size = Math.max(rect.width, rect.height) + 28
            gsap.to(ring, {
              width: size,
              height: size,
              borderRadius: size,
              duration: 0.26,
              ease: 'power3.out'
            })
            gsap.to(dot, { scale: 0.85, duration: 0.26, ease: 'power3.out' })
          }

          const registerTargets = () => {
            const elements = document.querySelectorAll(cursorTargetSelectors.join(','))
            elements.forEach(el => {
              if (el.dataset.cursorBound === 'true') return
              el.dataset.cursorBound = 'true'
              el.addEventListener('mouseenter', () => attachToTarget(el))
              el.addEventListener('mouseleave', detachTarget)
              el.classList.add('cursor-target')
            })
          }

          registerTargets()
          window.__mopprCursorRefresh = registerTargets
        }

        function render() {
          const route = parseRoute()
          const app = document.getElementById('app')
          let view = ''
          switch (route.path) {
            case 'home':
            case '':
              view = renderHome()
              break
            case 'browse':
              view = renderBrowse()
              break
            case 'profile':
              view = renderProfile(route.param || maids[0].id)
              break
            case 'messages':
              view = renderMessages()
              break
            default:
              view = renderHome()
              break
          }
          app.innerHTML = `${renderHeader(route)}<main class="flex-1">${view}</main>${renderFooter()}`
          if (typeof window.__mopprCursorRefresh === 'function') {
            window.__mopprCursorRefresh()
          }
          attachHandlers(route)
          setupHowItWorksAnimation()
          setupCardReveal()
        }

        function attachHandlers(route) {
          document.querySelectorAll('[data-theme-toggle]').forEach(btn => btn.addEventListener('click', toggleTheme))

          document.querySelectorAll('[data-booking-button]').forEach(btn => {
            btn.addEventListener('click', () => {
              const maidId = btn.getAttribute('data-maid-id')
              openBookingDrawer(maidId)
            })
          })

          if (route.path === 'messages') {
            document.querySelectorAll('[data-thread-id]').forEach(btn => {
              btn.addEventListener('click', () => {
                const newId = btn.getAttribute('data-thread-id')
                state.activeThreadId = newId
                state.messageDraft = ''
                render()
              })
            })

            const form = document.querySelector('[data-message-form]')
            if (form) {
              form.addEventListener('submit', (event) => {
                event.preventDefault()
                const input = form.querySelector('input[name="message"]')
                const value = input.value.trim()
                if (!value) return
                const thread = threads.find(t => t.threadId === state.activeThreadId)
                if (thread) {
                  thread.messages.push({
                    id: 'm' + Math.random().toString(36).slice(2),
                    sender: 'user',
                    text: value,
                    createdAt: new Date().toISOString()
                  })
                  state.messageDraft = ''
                  render()
                }
              })
              const input = form.querySelector('input[name="message"]')
              input.addEventListener('input', () => { state.messageDraft = input.value })
            }
          }
        }

        function setupCardReveal() {
          const cards = document.querySelectorAll('.maid-card')
          if (!cards.length) return
          const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                entry.target.classList.add('visible')
                obs.unobserve(entry.target)
              }
            })
          }, { threshold: 0.2 })
          cards.forEach(card => observer.observe(card))
        }

        function sunIcon() {
          return `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25M18.364 5.636l-1.59 1.59M21 12h-2.25M18.364 18.364l-1.59-1.59M12 21v-2.25M7.227 16.773l-1.59 1.59M5.25 12H3m4.227-4.227l-1.59-1.59M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>`
        }

        function moonIcon() {
          return `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" /></svg>`
        }

        let bookingDrawer
        function ensureBookingDrawer() {
          if (bookingDrawer) return bookingDrawer
          bookingDrawer = document.createElement('div')
          bookingDrawer.id = 'booking-drawer'
          bookingDrawer.className = 'fixed inset-0 z-50 hidden'
          bookingDrawer.innerHTML = `
            <div class="absolute inset-0 bg-black/40" data-close-booking></div>
            <div class="absolute inset-x-0 bottom-0 md:inset-auto md:right-6 md:bottom-6 md:w-[420px] rounded-t-2xl md:rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-soft p-5 space-y-4">
              <div class="flex items-center justify-between">
                <h3 class="font-semibold">Request Service</h3>
                <button data-close-booking class="text-slate-500">Close</button>
              </div>
              <div>
                <label class="text-sm block mb-2">
                  <span class="text-slate-500">Date</span>
                  <input type="date" class="mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus-primary" />
                </label>
                <div class="grid grid-cols-2 gap-2">
                  <label class="text-sm block">
                    <span class="text-slate-500">Start</span>
                    <input type="time" class="mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus-primary" />
                  </label>
                  <label class="text-sm block">
                    <span class="text-slate-500">End</span>
                    <input type="time" class="mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus-primary" />
                  </label>
                </div>
              </div>
              <div class="text-sm text-slate-600 dark:text-slate-300">Estimated price: <span id="booking-price" class="font-semibold"></span></div>
              <div class="flex gap-2">
                <button data-confirm-booking class="flex-1 rounded-md btn-primary btn-hover px-4 py-2 text-sm">Confirm Request</button>
                <button data-close-booking class="rounded-md border border-slate-200 dark:border-slate-800 px-4 py-2 text-sm btn-outline">Cancel</button>
              </div>
            </div>
          `
          document.body.appendChild(bookingDrawer)
          bookingDrawer.querySelectorAll('[data-close-booking]').forEach(btn => btn.addEventListener('click', closeBookingDrawer))
          bookingDrawer.querySelector('[data-confirm-booking]').addEventListener('click', () => {
            closeBookingDrawer()
            alert('Request sent! (demo)')
          })
          return bookingDrawer
        }

        function openBookingDrawer(maidId) {
          const drawer = ensureBookingDrawer()
          const maid = maids.find(m => m.id === maidId)
          if (!maid) return
          const price = '$' + (maid.hourlyRate * 2)
          drawer.querySelector('#booking-price').textContent = `${price} (2h demo)`
          drawer.classList.remove('hidden')
        }

        function closeBookingDrawer() {
          if (bookingDrawer) bookingDrawer.classList.add('hidden')
        }

        function setupHowItWorksAnimation() {
          const steps = document.querySelectorAll('.how-step')
          if (!steps.length) return
          const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                entry.target.classList.add('visible')
                obs.unobserve(entry.target)
              }
            })
          }, { threshold: 0.3 })
          steps.forEach(step => {
            observer.observe(step)
            const order = Number(step.getAttribute('data-step')) || 1
            step.style.transitionDelay = `${order * 0.18}s`
          })
        }

        // Animated cubes background
        document.addEventListener('DOMContentLoaded', () => {
          const canvas = document.getElementById('cube-bg');
          if (!canvas) return;
          let ctx = canvas.getContext('2d');
          let width = window.innerWidth;
          let height = window.innerHeight;
          let dpi = window.devicePixelRatio || 1;
          let cols = Math.floor(width / 64), rows = Math.floor(height / 64);
          let tile = 64, spacing = 40;
          let cubes = [];
          let mouseX = width/2, mouseY = height/2;

          function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            dpi = window.devicePixelRatio || 1;
            canvas.width = width * dpi;
            canvas.height = height * dpi;
            canvas.style.width = width+'px';
            canvas.style.height = height+'px';
            cols = Math.floor(width/spacing);
            rows = Math.floor(height/spacing);
          }

          function drawWireCube(cx, cy, size, rotX, rotY, color) {
            // Simple 3D dashed wireframe cube in 2D
            const s = size/2;
            // 8 cube vertices
            // [-1,-1,-1],[+1,-1,-1],[+1,+1,-1],[-1,+1,-1],[...z=+1]
            let verts = [
              [-s,-s,-s],[s,-s,-s],[s,s,-s],[-s,s,-s],
              [-s,-s,s],[s,-s,s],[s,s,s],[-s,s,s]
            ];
            // Rotation matrices
            const rx = rotX, ry = rotY;
            const sinX = Math.sin(rx), cosX = Math.cos(rx);
            const sinY = Math.sin(ry), cosY = Math.cos(ry);
            // Apply rotation
            verts = verts.map(([x,y,z])=>{
              // Y rotation
              let x2 = x*cosY - z*sinY;
              let z2 = x*sinY + z*cosY;
              // X rotation
              let y2 = y*cosX - z2*sinX;
              let z3 = y*sinX + z2*cosX;
              // Projection (no perspective)
              return [cx + x2, cy + y2];
            });
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.setLineDash([6,7]);
            // 12 cube edges, connect pairs
            const edges = [
              [0,1],[1,2],[2,3],[3,0],
              [4,5],[5,6],[6,7],[7,4],
              [0,4],[1,5],[2,6],[3,7]
            ];
            edges.forEach(([a,b])=>{
              ctx.beginPath();
              ctx.moveTo(verts[a][0], verts[a][1]);
              ctx.lineTo(verts[b][0], verts[b][1]);
              ctx.stroke();
            });
            ctx.setLineDash([]);
          }

          function makeCubes() {
            cubes=[];
            for (let y=0; y<rows; ++y) {
              for (let x=0; x<cols; ++x) {
                cubes.push({
                  x: x*spacing+spacing/2,
                  y: y*spacing+spacing/2,
                  rx: 0,
                  ry: 0
                });
              }
            }
          }
          function lerp(a,b,t) { return a+(b-a)*t; }
          function renderBg() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            // Theme color
            let dark = document.documentElement.classList.contains('dark');
            let color = dark ? 'rgba(156,163,255,0.65)' : 'rgba(96,88,171,0.39)';
            let tSize = tile * dpi, tSpacing = spacing * dpi;
            cubes.forEach(cube => {
              // Tilt math: get vector from cube to mouse
              let cx = cube.x*dpi, cy = cube.y*dpi;
              let dx = (mouseX-cube.x)/width, dy = (mouseY-cube.y)/height;
              // Map dx/dy to [-max,max] angle (max ~26deg)
              let max = 0.44;
              cube.ry = lerp(cube.ry, max*dx, 0.1);
              cube.rx = lerp(cube.rx, -max*dy, 0.1);
              drawWireCube(cx, cy, tSize*0.66, cube.rx, cube.ry, color);
            });
          }
          function animateBg() {
            renderBg();
            requestAnimationFrame(animateBg);
          }
          function bgInit() {
            resize();
            makeCubes();
            animateBg();
          }
          window.addEventListener('resize', ()=>{resize();makeCubes();});
          canvas.addEventListener('mouseenter',()=>canvas.style.opacity=1);
          window.addEventListener('mousemove', e=>{
            mouseX = e.clientX;
            mouseY = e.clientY;
          });
          bgInit();
        });

        window.addEventListener('hashchange', () => {
          render()
          window.scrollTo({ top: 0, behavior: 'smooth' })
        })

        render()
        if (!window.__mopprCursorInitialized) {
          initCustomCursor({ hideDefaultCursor: true })
          window.__mopprCursorInitialized = true
        } else if (typeof window.__mopprCursorRefresh === 'function') {
          window.__mopprCursorRefresh()
        }
      });
    </script>
  </body>
</html>

